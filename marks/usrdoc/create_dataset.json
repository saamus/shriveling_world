{"html":"<h1 id=\"instructions-for-the-creation-of-a-dataset\">Instructions for the creation of a dataset</h1>\n<h2 id=\"data-model\">Data model</h2>\n<p><img src=\"assets/data_model_v11.svg\" alt=\"data model\" title=\"data model\" /></p>\n<h2 id=\"a-system-of-five-files\">A system of five files</h2>\n<p>According to the data model, <em>Shriveling world</em> datasets are composed of five files:</p>\n<ol>\n<li><a href=\"#cities-file\">cities</a></li>\n<li><a href=\"#population-file\">population</a></li>\n<li><a href=\"#transport-network-file\">transport network</a></li>\n<li><a href=\"#transport-modes-file\">transport modes</a></li>\n<li><a href=\"#transport-mode-speed-file\">transport mode speed</a></li>\n</ol>\n<p>The files describe a <strong>graph</strong> modelling a transport network between cities with <strong>speed</strong> as a key parameter. The content of the files is <a href=\"#content-of-files-columns\">described below</a>.</p>\n<h2 id=\"a-differential-model\">A differential model</h2>\n<p>The <em>Shriveling world</em> model is by design <strong>differential</strong>, id est, it compares the basic terrestrial road speed with the fastest available transport speed. This comparison of speed computes a ratio that will determine the slope of cones. Addressing the issue of the historical contraction of time-space due to the improvement of transport means, the  <em>Shriveling world</em> model allows for considering different periods in time, years, different moments when the ratio is computed. The ratio is fixed for a given year.</p>\n<h2 id=\"historical-time-span\">Historical time span</h2>\n<p>The dataset will generate a <em>historical time span</em> during which, for each year, a graphical representation may be built. This <em>historical time span</em> considers the dates attached to the modes and network links but also the coexistence of road and other transport modes. This coexistence of transport modes is necessary to generate the cones slope, <a href=\"#a-differential-model\">as seen earlier</a>. Hence the <em>historical time span</em> is based on data provided about the year of opening and sometimes ending (e.g. supersonic aircraft) of the transport services, an on the period where <strong>road speed and another faster transport mode speed</strong> are known.<br />\nThe <em>historical time span</em> needs to fill in the variable <em>yearBegin</em> and the variable <em>yearEnd</em></p>\n<ul>\n<li><em>yearBegin</em> will be the earliest year when the model can be computed</li>\n<li><em>yearEnd</em> will be the latest year when the model can be computed</li>\n</ul>\n<p>There are two sources to determine this <em>historical time span</em>:</p>\n<table>\n<thead>\n<tr>\n<th id=\"source_file\">Source file</th>\n<th id=\"columns\">Columns</th>\n<th id=\"rationale\">Rationale</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>transport_network.csv</em></td>\n<td><em>eYearBegin</em> <em>eYearEnd</em></td>\n<td>to allow for considering the growth of a transport network of a given speed, over time, e.g. the morphogenesis of the high-speed rail network</td>\n</tr>\n<tr>\n<td><em>transport_mode_speed.csv</em></td>\n<td><em>year</em></td>\n<td>speed data is central in the model; speed data over years found in this file should be consistent with the other year sources</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"algorithm-for-determining-the-historical-time-span\">Algorithm for determining the historical time span</h2>\n<h3 id=\"step-1-computing-basic-variables-at-transport-mode-level\">Step #1 Computing basic variables at transport mode level</h3>\n<p>At code run, a series of time variables attached to the transport mode are computed. At one point the following variables are known for each transport mode:</p>\n<table>\n<thead>\n<tr>\n<th id=\"variable_name\">Variable name</th>\n<th id=\"formula\">formula</th>\n<th id=\"comments\">Comments</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>minEYear</em></td>\n<td>min(<em>eYearBegin</em>)</td>\n<td>the earliest date present in the network file for the corresponding transport  mode; may be empty, in such case the relevant info comes from <em>transport_network</em> file</td>\n</tr>\n<tr>\n<td><em>maxEYear</em></td>\n<td>max(<em>eYearEnd</em>)</td>\n<td>Usually empty (exception is Concorde that stopped operations)</td>\n</tr>\n<tr>\n<td><em>minSYear</em></td>\n<td>min(<em>year</em>)</td>\n<td>The earliest year in the <em>transport_mode_speed</em> file</td>\n</tr>\n<tr>\n<td><em>maxSYear</em></td>\n<td>max(<em>year</em>)</td>\n<td>The latest year in the <em>transport_mode_speed</em> file</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"step-2-computing-_yearbegin_-at-transport-mode-level\">Step #2 Computing <em>yearBegin</em> at transport mode level</h3>\n<p>A valid period for the model has an operating network and speed data. The period of operation of the network can be determined at edge level in the <em>transport_network</em>, while speed data comes as a table of <em>year</em> and <em>speed</em>. Network data should be consistent with the <a href=\"#historical-time-span\">other data sources for the historical time span</a>, and hence be considered when computing <em>yearBegin<sub>road</sub></em>. The equation becomes:</p>\n<p><em>yearBegin<sub>road</sub></em> = max(<em>minSYear<sub>road</sub></em>,   <em>minEYear<sub>road</sub></em>)</p>\n<p>In case one or several <em>minEYear<sub>road</sub></em> values are empty, the variable <em>minEYear</em> should have no influence on forming <em>yearBegin</em>.</p>\n<p>The computation for <em>road</em> described in steps #1 and #2 should be repeated for each transport mode accordingly.</p>\n<h3 id=\"step-3-computing-_yearend_-at-transport-mode-level\">Step #3 Computing <em>yearEnd</em> at transport mode level</h3>\n<p>The formula is:</p>\n<p><em>yearEnd<sub>road</sub></em> = min(  <em>maxSYear<sub>road</sub></em>,   <em>maxEYear<sub>road</sub></em>)</p>\n<p>The computation for <em>road</em> described in steps #1 and #3 should be repeated for each transport mode accordingly.</p>\n<h3 id=\"step-4-compute-the-_historical-time-span_\">Step #4 Compute the <em>Historical time span</em></h3>\n<p>Due to the  <a href=\"#a-differential-model\">differential nature of the model</a>, <em>yearBegin</em> should be indicated by the earliest year of operation among all the non road transport modes. In a typical, well formed dataset, one or several transport modes faster than road are described, typically expressway, high-speed rail or airlines. In this case the earliest date when the model can be computed is when one of these faster modes starts operations, providing <em>yearBegin<sub>road</sub></em> is equal or earlier.</p>\n<p><em>yearBegin</em> = min(<em>yearBegin<sub>Transp1</sub></em>, <em>yearBegin<sub>Transp2</sub></em>, …)</p>\n<p>Usually -- exception made of historical past datasets and prospective datasets -- <em>yearEnd</em> should be the current year. In order to care for these two cases, we add the rule that if <em>yearEnd<sub>road</sub></em> is empty, it should be populated with <em>currentYear</em> and otherwise untouched.</p>\n<ol>\n<li><em>yearEnd</em> = max(<em>yearEnd<sub>Transp1</sub></em>, <em>yearEnd<sub>Transp2</sub></em>, …)</li>\n<li>if <em>yearEnd<sub>road</sub></em> is empty, then <em>yearEnd<sub>road</sub></em> = <em>currentYear</em>,</li>\n</ol>\n<p>These formulas apply in the -- well formed dataset -- case where years for road are consistent with other modes years data, and hence: <em>yearBegin<sub>road</sub></em> <= <em>yearBegin</em> AND <em>yearEnd<sub>road</sub></em> >= <em>yearEnd</em></p>\n<!-- Algorithm for determining the variables _yearBegin_ and  _yearEnd_:\n\nSource file | Starting year for each mode | Ending year for each mode\n----------|----------|----------\n_transport mode speed.csv_ | _yearBeginRoadMode_ = min(_year<sub>road</sub>_), _yearBeginFasterTransp1Mode_ = min(_year<sub>Transp1</sub>_), _yearBeginFasterTransp2Mode_ = min(_year<sub>Transp2</sub>_), etc.|  _yearEndRoadMode_= max(_year<sub>road</sub>_), _yearEndFasterTransp1Mode_ = max(_year<sub>Transp1</sub>_), _yearEndFasterTransp2Mode_ = max(_year<sub>Transp2</sub>_), etc.\n_transport network.csv_ | _yearBeginRoadNetwork_ = min(_yearBegin<sub>road</sub>_), _yearBeginFasterTransp1Network_, _yearBeginFasterTransp2Network_, etc.| _yearEndRoadNetwork_ = max(_yearEnd<sub>road</sub>_), _yearEndFasterTransp1Network_, _yearEndFasterTransp2Network_, etc.\n\n_yearBeginRoad_ = min (_yearBeginRoadMode_, _yearBeginRoadNetwork_)\n_yearBeginFasterTransp1_ = min (_yearBeginFasterTransp1Mode_, _yearBeginFasterTransp1Network_)\n_yearBeginFasterTransp2_ = min (_yearBeginFasterTransp2Mode_, _yearBeginFasterTransp2Network_)\netc.\n\n_yearEndRoad_ = max (_yearEndRoadMode_, _yearEndRoadNetwork_)\n\n_yearBegin_ = max((_yearBeginRoad_), min(_yearBeginFasterTransp1_, _yearBeginFasterTransp2_, etc.))\n_yearEnd_ = min((_yearEndRoad_), max(_yearEndFasterTransp1_, _yearEndFasterTransp2_, etc.))\n\n-->\n<p>In addition, the transport related period should also be coherent with the dates of the city population data.</p>\n<h2 id=\"mandatory-elements-in-the-dataset\">Mandatory elements in the dataset</h2>\n<p>General <strong>common sense</strong> instructions:</p>\n<ul>\n<li>Files are in CSV format produced with default export options from LibreOffice Calc.</li>\n<li>The <a href=\"#a-system-of-five-files\">five files</a> must all be present in the dataset</li>\n<li>As shown in the <a href=\"#data-model\">figure of the data model</a> each file has optional and mandatory columns<ul>\n<li>mandatory columns must be populated completely, with no missing data</li>\n<li>optional columns may be left empty or may be completely or partially populated</li></ul></li>\n<li>Column names in files <strong>MUST</strong> be rigorously respected</li>\n<li>Id fields must be carefully populated because they connect files to each other:<ul>\n<li><em>cityCode</em> from the city file is linked to <em>iOri</em> and <em>iDes</em> in the network file</li>\n<li><em>transportModeCode</em> code from the transport network file is linked to <em>code</em> in the transport mode code file, and <em>transportModeCode</em> in the transport mode speed file</li></ul></li>\n<li>text type: <em>countryName</em>, <em>urbanAgglomeration</em>, <em>name</em> (of transport mode)</li>\n<li>numeric type: <em>countryCode</em>, <em>cityCode</em>, <em>latitude</em>, <em>longitude</em>, etc</li>\n</ul>\n<p>Specific <strong>critical</strong> instructions:</p>\n<ul>\n<li>The file <a href=\"#transport-mode-file\"><em>transport mode</em></a> <strong>MUST</strong> contain a mode named <em>Road</em> that will define the slope of cones; cones is the geographic surface and the <em>Road</em> speed is attached to this surface</li>\n<li>For the same reason the file <a href=\"#transport-mode-speed-file\"><em>transport mode speed</em></a> <strong>MUST</strong> contain speed information for the mode <em>road</em></li>\n<li>The mode <em>road</em> <strong>MUST</strong> be <em>terrestrial</em> (property <em>terrestrial</em> = 1)</li>\n<li>The model being by design <a href=\"#a-differential-model\">differential</a>, at least one other transport mode with a speed <strong>MUST</strong> be described (in both files  <a href=\"#transport-mode-file\"><em>transport mode</em></a> and <a href=\"#transport-mode-speed-file\"><em>transport mode speed</em></a>)</li>\n</ul>\n<h2 id=\"content-of-files-columns\">Content of files columns</h2>\n<ul>\n<li>The column order in files is not necessarily the same as proposed here.</li>\n<li>Column names <strong>MUST</strong> be rigorously respected since they are used to identify files at run time.</li>\n</ul>\n<h3 id=\"cities-file\">Cities file</h3>\n<table>\n<thead>\n<tr>\n<th id=\"column_name\">Column name</th>\n<th id=\"type\">Type</th>\n<th id=\"mandatory\">Mandatory</th>\n<th id=\"comments\">Comments</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>cityCode</em></td>\n<td>number</td>\n<td>yes</td>\n<td>city unique id</td>\n</tr>\n<tr>\n<td><em>cityName</em></td>\n<td>string</td>\n<td>yes</td>\n<td>agglomeration (city) name</td>\n</tr>\n<tr>\n<td><em>countryCode</em></td>\n<td>number</td>\n<td>yes</td>\n<td>numeric code of country where city belongs</td>\n</tr>\n<tr>\n<td><em>countryName</em></td>\n<td>string</td>\n<td>yes</td>\n<td>country name where city belongs</td>\n</tr>\n<tr>\n<td><em>latitude</em></td>\n<td>number</td>\n<td>yes</td>\n<td>numeric with comma, e.g. 35.55597</td>\n</tr>\n<tr>\n<td><em>longitude</em></td>\n<td>number</td>\n<td>yes</td>\n<td>numeric with comma</td>\n</tr>\n<tr>\n<td><em>radius</em></td>\n<td>number</td>\n<td>no</td>\n<td>cone radius for the case of islands located close to a coastal area devoid of cities, to avoid island cone overlapping in the coastal area, e.g. Canary Islands close to Maroc</td>\n</tr>\n<tr>\n<td><em>yearMotorway</em></td>\n<td>number</td>\n<td>no</td>\n<td>in order to affect the slope of this cone (city) from this year, in a variant of the model that changes local cone slope according the connectivity to a faster network (even if not all surrounding space is experiencing this speed of transport)</td>\n</tr>\n<tr>\n<td><em>yearHST</em></td>\n<td>number</td>\n<td>no</td>\n<td>same as previous, but here concerning High Speed Rail</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"population-file\">Population file</h3>\n<table>\n<thead>\n<tr>\n<th id=\"column_name\">Column name</th>\n<th id=\"type\">Type</th>\n<th id=\"mandatory\">Mandatory</th>\n<th id=\"comments\">Comments</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>cityCode</em></td>\n<td>number</td>\n<td>yes</td>\n<td>id of city</td>\n</tr>\n<tr>\n<td><em>year</em></td>\n<td>number</td>\n<td>yes</td>\n<td>year of census period</td>\n</tr>\n<tr>\n<td><em>population</em></td>\n<td>number</td>\n<td>yes</td>\n<td>in thousands inhabitants, at the agglomeration level recommended, e.g. as in UN World Urban Prospect database</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"transport-network-file\">Transport network file</h3>\n<p>The <em>transport network file</em> describes the edges of the graph between the cities as nodes. See her for <a href=\"https://timespace.hypotheses.org/177\">a justification of the terminology choices</a>.</p>\n<table>\n<thead>\n<tr>\n<th id=\"column_name\">Column name</th>\n<th id=\"type\">Type</th>\n<th id=\"mandatory\">Mandatory</th>\n<th id=\"comments\">Comments</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>cityCodeOri</em></td>\n<td>number</td>\n<td>yes</td>\n<td>id of origin city; direction (ori-des or des-ori) has no meaning in the model</td>\n</tr>\n<tr>\n<td><em>cityCodeDes</em></td>\n<td>number</td>\n<td>yes</td>\n<td>id of destination city</td>\n</tr>\n<tr>\n<td><em>transportModeCode</em></td>\n<td>number</td>\n<td>yes</td>\n<td>id of the transport mode</td>\n</tr>\n<tr>\n<td><em>eYearBegin</em></td>\n<td>number</td>\n<td>no</td>\n<td>year of opening of the edge, infrastructure or service, e.g. High Speed Rail in 1964 between Tokyo and Osaka; if <em>eYearBegin</em> is not populated( even only one single edge) , the period <em>historical time span</em> will be determined from the variable <em>year</em> in the <em>transport speed</em> file</td>\n</tr>\n<tr>\n<td><em>eYearEnd</em></td>\n<td>number</td>\n<td>no</td>\n<td>may be used for a service no longer operated, e.g. supersonic commercial aircraft Concorde between Paris and New-York started in 1977 and stopped operating in 2004; if <em>eYearEnd</em> not populated (even only one single edge), the period <em>historical time span</em> will be determined from the variable <em>year</em> in the <em>transport speed</em> file</td>\n</tr>\n</tbody>\n</table>\n<p>For the sake of readability this file usually contains two optional columns of <em>oriName</em> and <em>desName</em>.</p>\n<h3 id=\"transport-mode-file\">Transport mode file</h3>\n<table>\n<thead>\n<tr>\n<th id=\"column_name\">Column name</th>\n<th id=\"type\">Type</th>\n<th id=\"mandatory\">Mandatory</th>\n<th id=\"comments\">Comments</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>name</em></td>\n<td>string</td>\n<td>yes</td>\n<td>mode name</td>\n</tr>\n<tr>\n<td><em>code</em></td>\n<td>number</td>\n<td>yes</td>\n<td>unique id of the transport mode</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"transport-mode-speed-file\">Transport mode speed file</h3>\n<p>A given transport mode may experience an increase of speed over time, e.g. the five acceleration phases of China classical railways (non High Speed Rail) between 1997 and 2004</p>\n<table>\n<thead>\n<tr>\n<th id=\"column_name\">Column name</th>\n<th id=\"type\">Type</th>\n<th id=\"mandatory\">Mandatory</th>\n<th id=\"comments\">Comments</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>year</em></td>\n<td>number</td>\n<td>yes</td>\n<td>referring to a date when speed changed</td>\n</tr>\n<tr>\n<td><em>transportModeCode</em></td>\n<td>number</td>\n<td>yes</td>\n<td>id of transport mode</td>\n</tr>\n<tr>\n<td><em>speedKPH</em></td>\n<td>number</td>\n<td>yes</td>\n<td>commercial average speed on the transport network</td>\n</tr>\n</tbody>\n</table>"}